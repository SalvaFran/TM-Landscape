name: tmls
channels:
  - pytorch
  - nvidia
  - conda-forge
  - defaults

dependencies:
  # Core
  - python=3.9
  - numpy
  - scipy
  - pandas
  - matplotlib
  - seaborn
  - scikit-learn
  - tqdm
  - plotly
  - umap-learn              # CPU UMAP (we rely on this)
  - numba                   # speeds up UMAP-learn significantly

  # GPU stack (CUDA 12.x)
  - pytorch=2.2
  - torchvision
  - torchaudio
  - pytorch-cuda=12.1       # matches your CUDA driver (560.xx)
  - cupy-cuda12x            # GPU backend you successfully tested

  # Other scientific tools
  - faiss-cpu               # GPU version is unstable on CUDA 12.x
  - sentencepiece

  - pip
  - pip:
      - git+https://github.com/tymor22/tm-vec.git
      - transformers>=4.30
      - tokenizers
